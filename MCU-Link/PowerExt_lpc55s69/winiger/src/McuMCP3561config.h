/*!
 * Copyright (c) 2025, Erich Styger
 *
 * SPDX-License-Identifier: BSD-3-Clause
 */
#ifndef MCP3561_CONFIG_H_
#define MCP3561_CONFIG_H_

#ifdef __cplusplus
extern "C" {
#endif

#ifndef MCP3561_CONFIG_DEVICE_ADDRESS
  #define MCP3561_CONFIG_DEVICE_ADDRESS       (0x01)
    /*!< The device address is hardcoded and depends on the markings on the chip! */
#endif

/*
//@note  4-channel, SCAN conversion at fs = 2.4kHz max.
// ( clock selection | ADC mode | input current selection )
#define MCP3561_USERCONF_REG0 (MCP3561_CONFIG0_CLK_SEL_EXT | MCP3561_CONFIG0_ADC_MODE_CONV | MCP3561_CONFIG0_CS_SEL_NONE)
// ( oversampling rate | sample clock prescaler )
#define MCP3561_USERCONF_REG1 (MCP3561_CONFIG1_OSR_4096 | MCP3561_CONFIG1_AMCLK_DIV0)
// ( boost | gain | offset cancellation algorithm )
#define MCP3561_USERCONF_REG2 (MCP3561_CONFIG2_BOOST_x1 | MCP3561_CONFIG2_GAIN_x1 | MCP3561_CONFIG2_AZ_MUX_OFF)
// ( conversion mode | SPI output data format 32 or 24 bit | CRC | gain calibration | offset calibration )
#define MCP3561_USERCONF_REG3 (MCP3561_CONFIG3_CONV_MODE_CONTINUOUS | MCP3561_CONFIG3_DATA_FORMAT_24BIT | MCP3561_CONFIG3_CRCCOM_OFF | MCP3561_CONFIG3_GAINCAL_OFF | MCP3561_CONFIG3_OFFCAL_OFF)
// ( IRQ default pin state | fast commands | start of conversion IRQ )
#define MCP3561_USERCONF_IRQ_REG (MCP3561_IRQ_MODE_IRQ_HIGH | MCP3561_IRQ_FASTCMD_ON | MCP3561_IRQ_STP_ON)
#define MCP3561_USERCONF_SCAN_ENABLE // enable / disable SCAN conversion mode
#define MCP3561_USERCONF_SCAN_REG (MCP3561_SCAN_DLY_8 | MCP3561_SCAN_CH_DIFF_A | MCP3561_SCAN_CH_DIFF_B | MCP3561_SCAN_CH_DIFF_C | MCP3561_SCAN_CH_DIFF_D)
#define MCP3561_USERCONF_TIMER_VAL (1333)
*/

/*
//@note single channel, polling conversion at fs = 2.4kHz max.
//       conversion time is 4.2ms --> polling delay >=4.2ms
#define MCP3561_USERCONF_REG0 (MCP3561_CONFIG0_CLK_SEL_EXT | MCP3561_CONFIG0_ADC_MODE_CONV | MCP3561_CONFIG0_CS_SEL_NONE)
#define MCP3561_USERCONF_REG1 (MCP3561_CONFIG1_OSR_4096 | MCP3561_CONFIG1_AMCLK_DIV0)
#define MCP3561_USERCONF_REG2 (MCP3561_CONFIG2_BOOST_x1 | MCP3561_CONFIG2_GAIN_x1 | MCP3561_CONFIG2_AZ_MUX_OFF)
#define MCP3561_USERCONF_REG3 (MCP3561_CONFIG3_CONV_MODE_CONTINUOUS | MCP3561_CONFIG3_DATA_FORMAT_24BIT | MCP3561_CONFIG3_CRCCOM_OFF | MCP3561_CONFIG3_GAINCAL_OFF | MCP3561_CONFIG3_OFFCAL_OFF)
#define MCP3561_USERCONF_IRQ_REG (MCP3561_IRQ_MODE_IRQ_HIGH | MCP3561_IRQ_FASTCMD_ON | MCP3561_IRQ_STP_ON)
#undef MCP3561_USERCONF_SCAN_ENABLE // enable / disable SCAN conversion mode
*/

/*
//@note single channel, polling conversion at fs = 12.4 Hz max.
//       conversion time is 80.8ms --> polling delay >=80.8ms
#define MCP3561_USERCONF_REG0 (MCP3561_CONFIG0_CLK_SEL_EXT | MCP3561_CONFIG0_ADC_MODE_CONV | MCP3561_CONFIG0_CS_SEL_NONE)
#define MCP3561_USERCONF_REG1 (MCP3561_CONFIG1_OSR_81920 | MCP3561_CONFIG1_AMCLK_DIV0)
#define MCP3561_USERCONF_REG2 (MCP3561_CONFIG2_BOOST_x1 | MCP3561_CONFIG2_GAIN_x1 | MCP3561_CONFIG2_AZ_MUX_OFF)
#define MCP3561_USERCONF_REG3 (MCP3561_CONFIG3_CONV_MODE_CONTINUOUS | MCP3561_CONFIG3_DATA_FORMAT_24BIT | MCP3561_CONFIG3_CRCCOM_OFF | MCP3561_CONFIG3_GAINCAL_OFF | MCP3561_CONFIG3_OFFCAL_OFF)
#define MCP3561_USERCONF_IRQ_REG (MCP3561_IRQ_MODE_IRQ_HIGH | MCP3561_IRQ_FASTCMD_ON | MCP3561_IRQ_STP_ON)
#undef MCP3561_USERCONF_SCAN_ENABLE // enable / disable SCAN conversion mode
*/

#if 0
//@note  4-channel, auto conversion in SCAN mode at fs = 110 Hz max.
//       32 bit data format with CHannel ID
#define MCP3561_USERCONF_REG0 (MCP3561_CONFIG0_VREF_SEL_EXT | MCP3561_CONFIG0_CLK_SEL_EXT | MCP3561_CONFIG0_ADC_MODE_CONV | MCP3561_CONFIG0_CS_SEL_NONE)
#define MCP3561_USERCONF_REG1 (MCP3561_CONFIG1_OSR_4096 | MCP3561_CONFIG1_AMCLK_DIV0)
#define MCP3561_USERCONF_REG2 (MCP3561_CONFIG2_BOOST_x1 | MCP3561_CONFIG2_GAIN_x1 | MCP3561_CONFIG2_AZ_MUX_OFF | MCP3561_CONFIG2_AZ_REF_OFF)
#define MCP3561_USERCONF_REG3 (MCP3561_CONFIG3_CONV_MODE_CONTINUOUS | MCP3561_CONFIG3_DATA_FORMAT_32BIT_CHID_SGN | MCP3561_CONFIG3_CRCCOM_OFF | MCP3561_CONFIG3_GAINCAL_OFF | MCP3561_CONFIG3_OFFCAL_OFF)
#define MCP3561_USERCONF_IRQ_REG (MCP3561_IRQ_MODE_IRQ_HIGH | MCP3561_IRQ_FASTCMD_ON | MCP3561_IRQ_STP_ON)
#define MCP3561_USERCONF_SCAN_ENABLE // enable / disable SCAN conversion mode
#else
  //@note  2-channel, auto conversion in SCAN mode at fs = 110 Hz max.
  //       internal clock witout output
  //       32 bit data format with CHannel ID
  #define MCP3561_USERCONF_REG0 (MCP3561_CONFIG0_VREF_SEL_EXT | MCP3561_CONFIG0_CLK_SEL_INT | MCP3561_CONFIG0_ADC_MODE_CONV | MCP3561_CONFIG0_CS_SEL_NONE)
  #define MCP3561_USERCONF_REG1 (MCP3561_CONFIG1_OSR_64 | MCP3561_CONFIG1_AMCLK_DIV0)
  #define MCP3561_USERCONF_REG2 (MCP3561_CONFIG2_BOOST_x1 | MCP3561_CONFIG2_GAIN_x1 | MCP3561_CONFIG2_AZ_MUX_OFF | MCP3561_CONFIG2_AZ_REF_OFF)
  #define MCP3561_USERCONF_REG3 (MCP3561_CONFIG3_CONV_MODE_CONTINUOUS | MCP3561_CONFIG3_DATA_FORMAT_24BIT | MCP3561_CONFIG3_CRCCOM_OFF | MCP3561_CONFIG3_GAINCAL_OFF | MCP3561_CONFIG3_OFFCAL_OFF)
  #define MCP3561_USERCONF_IRQ_REG (MCP3561_IRQ_MODE_IRQ_HIGH | MCP3561_IRQ_FASTCMD_ON | MCP3561_IRQ_STP_ON)
  #define MCP3561_USERCONF_SCAN_ENABLE // enable / disable SCAN conversion mode
#endif

#ifdef MCP3561_USERCONF_SCAN_ENABLE
  #define MCP3561_USERCONF_SCAN_REG (MCP3561_SCAN_DLY_512 | MCP3561_SCAN_CH_DIFF_A | MCP3561_SCAN_CH_DIFF_B | MCP3561_SCAN_CH_DIFF_C | MCP3561_SCAN_CH_DIFF_D)
  #define MCP3561_USERCONF_TIMER_VAL (1206222)
#endif /* MCP3561_USERCONF_SCAN_ENABLE */

#ifdef __cplusplus
}  /* extern "C" */
#endif

#endif /* MCP3561_CONFIG_H_ */